package radius

import (
	"github.com/dayaftereh/stargen/mathf"
	"github.com/dayaftereh/stargen/stargen/constants"
	"github.com/dayaftereh/stargen/types"
)

var (
	GasDwarfRadiusX = []float64{
		48.1,
		60.3,
		540.1,
		166.3,
		239.9,
		347.9,
		969.8,
		106.9,
		318.2,
		581.0,
		407.7,
		409.7,
		237.2,
		984.1,
		709.9,
		549.9,
		684.9,
		406.5,
		171.8,
		340.0,
		1123.6,
		790.9,
		93.1,
		89.8,
		875.5,
		635.7,
		239.0,
		1474.7,
		1485.2,
		861.5,
		436.2,
		650.3,
		1186.0,
		506.4,
		754.4,
		621.4,
		367.1,
		418.5,
		1076.0,
		585.7,
		331.7,
		299.2,
		907.4,
		419.2,
		282.9,
		355.1,
		528.8,
		355.0,
		245.3,
		959.7,
		697.5,
		911.1,
		729.8,
		759.6,
		771.9,
		605.5,
		534.5,
		584.9,
		701.2,
		1128.3,
		559.9,
		685.9,
		1045.8,
		425.4,
		74.6,
		153.3,
		532.4,
		759.5,
		600.2,
		478.2,
		634.3,
		509.8,
		751.7,
		519.6,
		796.3,
		556.9,
		770.9,
		330.4,
		391.9,
		636.3,
		630.8,
		1336.0,
		386.9,
		417.3,
		928.2,
		520.3,
		386.4,
		79.8,
		617.8,
		581.9,
		560.1,
		769.4,
		522.8,
		465.9,
		680.0,
		828.0,
		459.9,
		397.3,
		479.9,
		746.3,
		1102.9,
		817.0,
		842.9,
		801.2,
		1001.4,
		595.0,
	}

	GasDwarfRadiusY = []float64{
		1.638,
		1.27,
		0.09 * constants.EarthDensity,
		0.09 * constants.EarthDensity,
		0.1 * constants.EarthDensity,
		0.1 * constants.EarthDensity,
		0.1 * constants.EarthDensity,
		0.11 * constants.EarthDensity,
		0.07 * constants.EarthDensity,
		0.11 * constants.EarthDensity,
		0.11 * constants.EarthDensity,
		0.12 * constants.EarthDensity,
		0.12 * constants.EarthDensity,
		0.13 * constants.EarthDensity,
		0.13 * constants.EarthDensity,
		0.13 * constants.EarthDensity,
		0.14 * constants.EarthDensity,
		0.14 * constants.EarthDensity,
		0.14 * constants.EarthDensity,
		0.14 * constants.EarthDensity,
		0.14 * constants.EarthDensity,
		0.2 * constants.EarthDensity,
		0.15 * constants.EarthDensity,
		0.15 * constants.EarthDensity,
		0.15 * constants.EarthDensity,
		0.15 * constants.EarthDensity,
		0.15 * constants.EarthDensity,
		0.38 * constants.EarthDensity,
		0.15 * constants.EarthDensity,
		0.15 * constants.EarthDensity,
		0.15 * constants.EarthDensity,
		0.34 * constants.EarthDensity,
		0.17 * constants.EarthDensity,
		0.17 * constants.EarthDensity,
		0.17 * constants.EarthDensity,
		0.17 * constants.EarthDensity,
		0.17 * constants.EarthDensity,
		0.17 * constants.EarthDensity,
		0.17 * constants.EarthDensity,
		0.17 * constants.EarthDensity,
		0.18 * constants.EarthDensity,
		0.18 * constants.EarthDensity,
		0.07 * constants.EarthDensity,
		0.18 * constants.EarthDensity,
		0.18 * constants.EarthDensity,
		0.18 * constants.EarthDensity,
		0.18 * constants.EarthDensity,
		0.18 * constants.EarthDensity,
		0.19 * constants.EarthDensity,
		0.19 * constants.EarthDensity,
		0.19 * constants.EarthDensity,
		0.1 * constants.EarthDensity,
		0.05 * constants.EarthDensity,
		0.2 * constants.EarthDensity,
		0.2 * constants.EarthDensity,
		0.2 * constants.EarthDensity,
		0.21 * constants.EarthDensity,
		0.21 * constants.EarthDensity,
		0.21 * constants.EarthDensity,
		0.21 * constants.EarthDensity,
		0.21 * constants.EarthDensity,
		0.21 * constants.EarthDensity,
		0.21 * constants.EarthDensity,
		0.21 * constants.EarthDensity,
		0.21 * constants.EarthDensity,
		0.21 * constants.EarthDensity,
		0.22 * constants.EarthDensity,
		0.22 * constants.EarthDensity,
		0.22 * constants.EarthDensity,
		0.22 * constants.EarthDensity,
		0.14 * constants.EarthDensity,
		0.22 * constants.EarthDensity,
		0.22 * constants.EarthDensity,
		0.22 * constants.EarthDensity,
		0.22 * constants.EarthDensity,
		0.22 * constants.EarthDensity,
		0.23 * constants.EarthDensity,
		0.23 * constants.EarthDensity,
		0.23 * constants.EarthDensity,
		0.23 * constants.EarthDensity,
		0.23 * constants.EarthDensity,
		0.23 * constants.EarthDensity,
		0.24 * constants.EarthDensity,
		0.24 * constants.EarthDensity,
		0.24 * constants.EarthDensity,
		0.24 * constants.EarthDensity,
		0.24 * constants.EarthDensity,
		0.24 * constants.EarthDensity,
		0.25 * constants.EarthDensity,
		0.25 * constants.EarthDensity,
		0.25 * constants.EarthDensity,
		0.25 * constants.EarthDensity,
		0.25 * constants.EarthDensity,
		0.25 * constants.EarthDensity,
		0.25 * constants.EarthDensity,
		0.25 * constants.EarthDensity,
		0.26 * constants.EarthDensity,
		0.26 * constants.EarthDensity,
		0.26 * constants.EarthDensity,
		0.26 * constants.EarthDensity,
		0.26 * constants.EarthDensity,
		0.26 * constants.EarthDensity,
		0.27 * constants.EarthDensity,
		0.27 * constants.EarthDensity,
		0.27 * constants.EarthDensity,
		0.27 * constants.EarthDensity,
	}
)

func gasDwarfRadius(planet *types.Planet) float64 {
	coeff := polynomialfit(3, GasDwarfRadiusX, GasDwarfRadiusY)
	gasDensity := mathf.QuadTrend(coeff[2], coeff[1], coeff[0], planet.EstimatedTemperature)
	atmosphereHeight := VolumeRadius(planet.GasMass, gasDensity)
	radius := planet.CoreRadius + atmosphereHeight
	return radius
}
